(this.webpackJsonpmech=this.webpackJsonpmech||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(11),i=n(20),s=n(6),c=n(37),o=n(55),l=n(65),d=n(81),u=n(67),h=n(80),j=n(15),b=n(0),m=n(38),f=n(61),O=n(3),v=n(2),g=n(58),p=n(59),x=n(66),y=n(60),$="Load Error: This file is not supported.",k={STLLoader:g.a,OBJLoader:p.a,FBXLoader:x.a,GLTFLoader:y.a},w={STL:function(e,t){var n,r=null===(n=t.parse)||void 0===n?void 0:n.call(t,e.target.result),a=new b.MeshStandardMaterial;return new b.Mesh(r,a)},OBJ:function(e,t){var n;return null===(n=t.parse)||void 0===n?void 0:n.call(t,e.target.result)},FBX:function(e,t){var n;return null===(n=t.parse)||void 0===n?void 0:n.call(t,e.target.result)},GLTF:function(e,t){var n;return null===(n=t.parse)||void 0===n?void 0:n.call(t,e.target.result)}};function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new b.Shape,n=e.w,a=void 0===n?1:n,i=e.h,s=void 0===i?1:i,c=e.m,o=void 0===c?.76:c,l=e.n,d=void 0===l?.06:l,u=e.d,h=void 0===u?.6:u,j=[[0,0],[0,s],[(a-o)/2,s],[(a-d)/2,h+d],[(a-d)/2,h],[(a+d)/2,h],[(a+d)/2,h+d],[(a+o)/2,s],[a,s],[a,0]];j.forEach((function(e){var n=Object(r.a)(e,2),a=n[0],i=n[1];return t.lineTo(a,i)}));var m={steps:1,depth:1,bevelEnabled:!1},f=new b.ExtrudeGeometry(t,m),O=(new b.Matrix4).makeTranslation(-.5,-.5,-.5);return f.applyMatrix4(O)}var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};Object(O.a)(this,e),this.callback=function(){},this.state={},this.callback=t,this.state.geometry=M()}return Object(v.a)(e,[{key:"bind",value:function(e){return"mesh"===e.type&&(e.onClick=e.onDoubleClick=this.click.bind(this)),"file"===e.type&&(e.onChange=this.change.bind(this)),e}},{key:"change",value:function(e){this.state.isChanged=!0,this.state.target=e.target,this.callback([])}},{key:"click",value:function(){this.state.isMesh=!this.state.isMesh,this.callback([])}},{key:"effect",value:function(){var e,t,n=this.state;if(this.state.isChanged){if(null===(e=n.target)||void 0===e||!e.files)return console.warn("Event Target Files "+$);var r=n.target.files[0];n.isChanged=!1,this.setup(r.name),null===(t=n.reader)||void 0===t||t.readAsArrayBuffer(r)}}},{key:"clean",value:function(){var e=this.state;return function(){var t,n;Array.isArray(e.material)?e.material.forEach((function(e){return null===e||void 0===e?void 0:e.dispose()})):null===(t=e.material)||void 0===t||t.dispose(),null===(n=e.geometry)||void 0===n||n.dispose()}}},{key:"setup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.state;t.name=e||"",t.type=t.name.split(".").slice(-1)[0].toUpperCase()||"",t.key=t.type+"Loader";var n=k[t.key];if(!n)return console.warn("File "+$);t.reader=new FileReader,t.loader=new n,t.parser=w[t.type],t.reader.addEventListener("progress",this.progress.bind(this)),t.reader.addEventListener("load",this.load.bind(this))}},{key:"progress",value:function(e){var t=this.state;t.size="("+~~Math.floor(e.total/1e3)+" KB)",t.pbar=Math.floor(e.loaded/e.total*100)+"%"}},{key:"load",value:function(e){var t,n=this.state;return n.mesh=null===(t=n.parser)||void 0===t?void 0:t.call(n,e,n.loader),n.mesh?n.mesh.geometry?(this.geometry=n.mesh.geometry||n.geometry,void this.callback([])):console.warn("Parsed Geometry "+$):console.warn("Parsed Mesh "+$)}},{key:"geometry",set:function(e){var t,n=this.state;if(null===(t=e.center)||void 0===t||t.call(e),n.geometry=e,e.boundingBox){var r=e.boundingBox,a=r.min,i=r.max;n.width=i.x-a.x,n.height=i.y-a.y,n.depth=i.z-a.z,n.scale=Math.max(n.width,n.height,n.depth),n.geometry.scale(1/n.scale,1/n.scale,1/n.scale)}}}]),e}(),z=Math.round,S=Math.PI,L=function(){function e(){Object(O.a)(this,e),this.state={rotation:[0,0,0],scale:[1,1,1]},this.dispatch=function(){}}return Object(v.a)(e,[{key:"bind",value:function(e){this.dispatch=e;var t={};return t.onDrag=this.drag.bind(this),t.onWheel=this.wheel.bind(this),t}},{key:"drag",value:function(e){var t=this.state,n=Object(r.a)(e.movement,2),a=n[0],i=n[1],s=e.first,c=e.last,o=Object(r.a)(e.args,1)[0];t.weight=S/360,t.step=S/2,t.dx=[0,i,i][o]*t.weight,t.dy=[a,0,a][o]*t.weight,t.dz=-[i,a,0][o]*t.weight,s&&(t.rx=t.ry=t.rz=0),c?(t.rx=z(t.dx/t.step)*t.step,t.ry=z(t.dy/t.step)*t.step,t.rz=z(t.dz/t.step)*t.step,this.dispatch({rotation:[t.rx,t.ry,t.rz]})):this.dispatch({rotation:[t.rx+t.dx,t.ry+t.dy,t.rx+t.dz]})}},{key:"wheel",value:function(e){var t=this.state,n=Object(r.a)(e.offset,2)[1];t.s=1+n/1e3,this.dispatch({scale:[t.s,t.s,t.s]})}}]),e}();var C,E,B=n(26),F=n(24),T=n(29),A=n(12),G=["theme","children"];var P,_,I,J=F.d.div.attrs((function(e){var t=e.$to,n=e.onClick,r=e.onChange;return(t||n||r)&&(e.$cp=!0),e})).attrs((function(e){var t=e.$to,n=e.type,r=e.children;if(t&&(e.onClick=function(){window.open(t,"_blank")}),!e.onChange)return e;var a={type:n,hidden:!0,htmlFor:r,key:r};return{as:"label",children:[Object(s.createElement)("input",a),r],id:r}}))(C||(C=Object(B.a)(["\n  width: auto;\n  height: auto;\n  border: initial;\n  display: flex;\n  outline: none;\n  align-items: center;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  justify-content: center;\n  text-align: center;\n  background: ",";\n  font-size: ",";\n  ","\n  ","\n  ","\n"])),(function(e){return e.theme.isDarkMode?"#222933":"#fff"}),(function(e){return e.$sm?"3.5mm":"5mm"}),(function(e){return e.$cp&&Object(F.c)(E||(E=Object(B.a)(["\n    cursor: pointer;\n    text-decoration: underline;\n  "])))}),(function(e){var t=e.$j;return t&&"grid-row: ".concat(t,";")}),(function(e){var t=e.$i;return t&&"grid-column: ".concat(t,";")})),N=F.d.div.attrs((function(e){return e._=e.$mm?"mm":"",e})).attrs((function(e){var t=e.$j,n=e.$i,r=e._;return t&&(e.$j=t.split(" ").join(r+" ")+r),n&&(e.$i=n.split(" ").join(r+" ")+r),e})).attrs((function(e){var t=e.theme,n=e.children,r=Object(i.a)(e,G);return t?(r.children=Object(s.createElement)(F.a,{theme:t},n),r):e}))(P||(P=Object(B.a)(["\n  margin: auto;\n  display: grid;\n  max-width: 100%;\n  grid-auto-flow: column;\n  ","\n  ","\n  ","\n  ","\n  @media screen and (max-width: 175mm) {\n    display: ",";\n    flex-direction: column;\n  }\n"])),(function(e){var t=e.$j;return t&&"grid-template-rows: ".concat(t,";")}),(function(e){var t=e.$i;return t&&"grid-template-columns: ".concat(t,";")}),(function(e){var t=e.$top,n=e.margin,r=e.theme;return t&&Object(F.c)(_||(_=Object(B.a)(["\n    ","\n    top: 0;\n    left: 0;\n    width: calc(100% - 2 * ",");\n    height: calc(100% - 2 * ",");\n    border: medium solid ",";\n    cursor: crosshair;\n    position: fixed;\n  "])),Object(F.c)({margin:n}),n,n,r.isDarkMode?"#e2e2e2":"#000")}),(function(e){var t=e.$b,n=e.theme;return t&&Object(F.c)(I||(I=Object(B.a)(["\n    cursor: auto;\n    margin: auto 0 0 auto;\n    grid-gap: 0.5mm;\n    transition: 0.5s;\n    background: ",";\n    border-top: medium solid ",";\n    border-left: medium solid ",";\n  "])),n.isDarkMode?"#e2e2e2":"#000",n.isDarkMode?"#e2e2e2":"#000",n.isDarkMode?"#e2e2e2":"#000")}),(function(e){return e.$b?"none":"flex"}));var R,W=["r1","r2","s"],X=Object(F.b)(R||(R=Object(B.a)(["body {\n  user-select: none;\n  color: ",";\n  background: ",";\n}"])),(function(e){return e.$d?"#e2e2e2":"#000"}),(function(e){return e.$d?"#222933":"#fff"}));function U(e){var t=Object(T.useSpring)({reverse:e.$d,from:{r1:10,r2:20,s:.9,stroke:"#e2e2e2",strokeDashoffset:67.5},to:{r1:20,r2:10,s:.8,stroke:"#000",strokeDashoffset:17.5}}),n=t.r1,r=t.r2,s=t.s,c=Object(i.a)(t,W);return Object(A.jsxs)(T.animated.svg,{viewBox:"0 0 100 50",style:{transform:s.to((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"scale(".concat(e,")")}))},children:[Object(A.jsxs)(T.animated.g,Object(a.a)(Object(a.a)({},c),{},{fill:"none",strokeWidth:"2",children:[Object(A.jsx)("polygon",{points:"55,15 85,5 85,45 55,35"}),Object(A.jsx)(T.animated.circle,{cx:"25",cy:"25",r:n}),Object(A.jsx)(T.animated.circle,{cx:"25",cy:"25",r:r})]})),Object(A.jsxs)(T.animated.g,Object(a.a)(Object(a.a)({},c),{},{strokeDasharray:"35,5,5,5",strokeWidth:"2",children:[Object(A.jsx)("line",{x1:"0",y1:"25",x2:"100",y2:"25"}),Object(A.jsx)("line",{x1:"25",y1:"0",x2:"25",y2:"50"})]}))]})}var V=["$","as"],H=function(e){return"".concat(e.getFullYear(),".").concat(e.getMonth()+1,".").concat(e.getDate())},K={touchAction:"none",margin:0},Y=new b.Vector3,q=l.a,Q="https://github.com/tseijp/";function Z(e){e.vertexShader="\n    varying float isDashed;\n    ".concat(e.vertexShader,"\n  ").replace("#include <fog_vertex>","#include <fog_vertex>\n      vec3 nor1 = normalize(normalMatrix * normal);\n      vec3 vDir = normalize(mvPosition.xyz);\n      isDashed = step( 0., dot( vDir, nor1 ) );\n    "),e.fragmentShader="\n    varying float isDashed;\n    ".concat(e.fragmentShader,"\n  ").replace("if ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}","if ( isDashed > 0.0 ) {\n      // TODO FIX\n      if ( mod( vLineDistance, totalSize ) > dashSize ) {\n        discard;\n      }\n    }")}function ee(e){var t=e.$,n=e.as,r=Object(i.a)(e,V),c=j.f(),o=c.gl,l=c.scene,d=c.viewport,u=Object(s.useRef)(null);return j.e((function(){var e=t.current.getContext("2d");u.current.lookAt(Y),o.autoClear=!0,o.render(l,u.current),o.autoClear=!1,o.clearDepth(),e.canvas.width+=0,e.drawImage(o.domElement,0,0)})),j.d(Object(A.jsx)(n,Object(a.a)({ref:u},r)),d)}function te(){var e=Object(o.a)(null),t=Object(r.a)(e,4),n=t[0],i=t[1],c=t[2],l=t[3],b=function(){var e=Object(s.useState)(new L),t=Object(r.a)(e,1)[0],n=Object(m.useSpring)((function(){return t.state})),a=Object(r.a)(n,2),i=a[0],c=a[1];return[i,Object(f.useGesture)(t.bind(c.start.bind(c)))]}(),O=Object(r.a)(b,2),v=O[0],g=O[1],p=function(){var e=Object(s.useState)([])[1],t=Object(s.useState)(new D(e)),n=Object(r.a)(t,1)[0];return Object(s.useEffect)((function(){return n.effect.bind(n)()})),Object(s.useEffect)((function(){return n.clean.bind(n)()}),[n]),[n.state,n.bind.bind(n)]}(),x=Object(r.a)(p,2),y=x[0],$=x[1];return Object(A.jsxs)(N,{$top:!0,$j:"auto auto",theme:{isDarkMode:y.isMesh},margin:"10mm",children:[Object(A.jsx)(X,{$d:y.isMesh}),Object(A.jsxs)(N,{$i:"auto auto",$j:"auto auto",children:[" ",Object(A.jsx)("canvas",Object(a.a)(Object(a.a)({ref:n},g(1)),{},{style:K})),Object(A.jsx)("canvas",Object(a.a)(Object(a.a)({ref:i},g(2)),{},{style:K})),Object(A.jsx)("canvas",Object(a.a)(Object(a.a)({ref:c},g(0)),{},{style:K})),Object(A.jsxs)(j.a,{style:{gridRow:"1/2",gridColumn:"2/3"},children:[Object(A.jsx)(ee,{$:n,zoom:100,"position-y":100,as:q}),Object(A.jsx)(ee,{$:i,zoom:100,"position-z":100,as:q}),Object(A.jsx)(ee,{$:c,zoom:100,"position-x":100,as:q}),Object(A.jsx)(q,{ref:l,makeDefault:!0,zoom:75,position:[1,1,1]}),Object(A.jsx)(d.a,{enablePan:!1,rotateSpeed:.15}),Object(A.jsx)(u.a,{margin:[50,50],alignment:"top-right",children:Object(A.jsx)(h.a,{})}),Object(A.jsx)("ambientLight",{}),Object(A.jsx)("pointLight",{}),Object(A.jsx)(s.Suspense,{fallback:null,children:Object(A.jsxs)(m.animated.group,Object(a.a)(Object(a.a)({},v),{},{children:[Object(A.jsxs)("lineSegments",{onUpdate:function(e){return e.computeLineDistances()},children:[y.geometry&&Object(A.jsx)("edgesGeometry",{args:[y.geometry]}),Object(A.jsx)("lineDashedMaterial",{dashSize:.3,gapSize:.15,color:"#222933",onBeforeCompile:Z})]}),y.isMesh&&Object(A.jsx)("mesh",{geometry:y.geometry,children:Object(A.jsx)("meshStandardMaterial",{transparent:!0,color:"white"})})]}))}),Object(A.jsx)("axesHelper",{scale:10,position:[.01,.01,.01]}),Object(A.jsx)("color",{attach:"background",args:[y.isMesh?"#222933":"#fff"]})]})]}),Object(A.jsxs)(N,{$b:!0,$mm:!0,$i:"12 43 10 15 15 15 40",$j:"7 8 10 15",children:[Object(A.jsx)(J,{$i:"1/3",$j:"1/3",$to:"https://github.com/tseijp/mech",children:document.title}),Object(A.jsx)(J,{$i:"3/6",$j:"1/3",children:H(new Date)}),Object(A.jsx)(J,{$i:"6/7",$sm:!0,children:"No."}),Object(A.jsx)(J,{$i:"7/8",$sm:!0,children:"1710000"}),Object(A.jsx)(J,{$i:"6/7",$sm:!0,children:"Name"}),Object(A.jsx)(J,{$i:"7/8",$sm:!0,$to:Q,children:"tseijp"}),Object(A.jsx)(J,{$i:"1/4",children:"Title"}),Object(A.jsx)(J,{$i:"4/5",children:"Scale"}),Object(A.jsx)(J,{$i:"5/7",children:"Projection"}),Object(A.jsx)(J,{$i:"7/8",children:"Number"}),Object(A.jsx)(J,Object(a.a)(Object(a.a)({$i:"1/4"},$({type:"file"})),{},{children:y.name||"V Block"})),Object(A.jsx)(J,{$i:"4/5",children:"1:1"}),Object(A.jsx)(J,Object(a.a)(Object(a.a)({$i:"5/7"},$({type:"mesh"})),{},{children:Object(A.jsx)(U,{$d:y.isMesh})})),Object(A.jsx)(J,{$i:"7/8",children:y.size||"1800"})]})]})}Object(c.render)(Object(A.jsx)(s.StrictMode,{children:Object(A.jsx)(te,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.10e6ffb3.chunk.js.map